{"version":3,"sources":["..\\..\\..\\..\\..\\..\\..\\assets\\cases\\02_ui\\09_videoplayer\\VideoPlayer/assets\\cases\\02_ui\\09_videoplayer\\VideoPlayer\\VideoPlayerCtrl.js"],"names":["cc","Class","extends","Component","properties","videoPlayer","default","type","VideoPlayer","statusLabel","Label","currentTime","totalTime","tips","play","pause","toggleFullscreen","sys","isBrowser","browserType","BROWSER_TYPE_MOBILE_QQ","browserVersion","test","navigator","userAgent","textKey","log","isFullscreen","stop","keepRatioSwitch","keepAspectRatio","getStatus","event","EventType","PLAYING","PAUSED","STOPPED","COMPLETED","META_LOADED","CLICKED","READY_TO_PLAY","onVideoPlayerEvent","sender","string","duration","getDuration","toFixed","isPlaying","toggleVisibility","enabled","playOnlineVideo","resourceType","ResourceType","REMOTE","remoteURL","playLocalVideo","LOCAL","update"],"mappings":"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","file":"VideoPlayerCtrl.js","sourceRoot":"..\\..\\..\\..\\..\\..\\..\\assets\\cases\\02_ui\\09_videoplayer\\VideoPlayer","sourcesContent":["cc.Class({\r\n    extends: cc.Component,\r\n\r\n    properties: {\r\n        videoPlayer: {\r\n            default: null,\r\n            type: cc.VideoPlayer\r\n        },\r\n        statusLabel: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        currentTime: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        totalTime: {\r\n            default: null,\r\n            type: cc.Label\r\n        },\r\n        tips: {\r\n            default: null,\r\n            type: cc.Label\r\n        }\r\n    },\r\n\r\n    play () {\r\n        this.videoPlayer.play();\r\n    },\r\n\r\n    pause () {\r\n        this.videoPlayer.pause();\r\n    },\r\n\r\n    toggleFullscreen () {\r\n        if (\r\n            cc.sys.isBrowser &&\r\n            cc.sys.browserType === cc.sys.BROWSER_TYPE_MOBILE_QQ &&\r\n            cc.sys.browserVersion <= 7.2 &&\r\n            /Nexus 6/.test(navigator.userAgent)\r\n        ) {\r\n            this.tips.textKey = 'cases/02_ui/09_videoplayer/videoPlayer.nonsupport_fullscreen';\r\n            return cc.log('May be crash, so prohibit full screen');\r\n        }\r\n        this.videoPlayer.isFullscreen = true;\r\n    },\r\n\r\n    stop () {\r\n        this.videoPlayer.stop();\r\n    },\r\n\r\n    keepRatioSwitch () {\r\n        this.videoPlayer.keepAspectRatio = !this.videoPlayer.keepAspectRatio;\r\n    },\r\n\r\n    getStatus (event) {\r\n        switch (event) {\r\n            case cc.VideoPlayer.EventType.PLAYING:\r\n                return 'PLAYING';\r\n            case cc.VideoPlayer.EventType.PAUSED:\r\n                return 'PAUSED';\r\n            case cc.VideoPlayer.EventType.STOPPED:\r\n                return 'STOPPED';\r\n            case cc.VideoPlayer.EventType.COMPLETED:\r\n                return 'COMPLETED';\r\n            case cc.VideoPlayer.EventType.META_LOADED:\r\n                return 'META_LOADED';\r\n            case cc.VideoPlayer.EventType.CLICKED:\r\n                return 'CLICKED';\r\n            case cc.VideoPlayer.EventType.READY_TO_PLAY:\r\n                return 'READY_TO_PLAY';\r\n            default:\r\n                return 'NONE';\r\n        }\r\n    },\r\n\r\n    onVideoPlayerEvent (sender, event) {\r\n        this.statusLabel.string = this.getStatus(event);\r\n        if (event === cc.VideoPlayer.EventType.META_LOADED) {\r\n            var duration = this.videoPlayer.getDuration();\r\n            if (duration) {\r\n                this.totalTime.string = duration.toFixed(2);\r\n            }\r\n            else {\r\n                this.totalTime.string = 0;\r\n            }\r\n        }\r\n        else if (event === cc.VideoPlayer.EventType.CLICKED) {\r\n            if (this.videoPlayer.isPlaying()) {\r\n                this.videoPlayer.pause();\r\n            } else {\r\n                this.videoPlayer.play();\r\n            }\r\n        }\r\n    },\r\n\r\n    toggleVisibility () {\r\n        this.videoPlayer.enabled = !this.videoPlayer.enabled;\r\n    },\r\n\r\n    playOnlineVideo () {\r\n        this.videoPlayer.resourceType = cc.VideoPlayer.ResourceType.REMOTE;\r\n        this.videoPlayer.remoteURL = 'http://benchmark.cocos2d-x.org/cocosvideo.mp4';\r\n        this.videoPlayer.play();\r\n    },\r\n\r\n    playLocalVideo () {\r\n        this.videoPlayer.resourceType = cc.VideoPlayer.ResourceType.LOCAL;\r\n        this.videoPlayer.play();\r\n    },\r\n\r\n    update () {\r\n        if (this.currentTime && this.videoPlayer.currentTime) {\r\n            this.currentTime.string = this.videoPlayer.currentTime.toFixed(2);\r\n        }\r\n    }\r\n\r\n});\r\n"]}